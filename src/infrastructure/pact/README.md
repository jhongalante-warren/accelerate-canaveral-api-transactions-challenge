# Contract Testing Section

This section is separated in two folders:

## Publisher

This one is responsible for publishing the contract generated by the contract tests that needs to be wrote with the following extension:

    yourFileName.pacttest.ts

After you wrote your test you only need to run the the with `npm run pact:test` you will see that a folder outsite your project will be created with all your pacts, you can check if you wish.
Now with the pacts "in hands" you only needs to publish your pacts to the broker by running `npm run pact:publish` and if nothing wrong happen you will be able to check the pact on the broker by accessing:
`https://pact-broker.{{env}}.warren.com.br/`

## Verifier

And this another one is the provider side where it will verify if the contract published fits with the contract the api is providing.
To verify it you need to run the following command:

    npm run pact:verify

Note: Maybe will need to mock the authentication on the `Verifier.pactverify.ts` by using `jest.mock('path/to/module')` for more context please reach [jest manual mocks](https://jestjs.io/pt-BR/docs/manual-mocks)
Another thing to pay attention is that you may need create a fake resource, for example:

> Let's take that your api consult a data on the database (e.g. Tickers)
> but you may not will want to consult the database, so you may need to
> create a fake Ticker on a fake database just for test purpose, so your
> route will be able to return the fake Ticker.

For more examples on how to create tests please reach [Jest pact examples](https://github.com/YOU54F/jest-pact-typescript)
